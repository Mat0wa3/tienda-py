<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>products</title>
</head>

<body class="bg-gray-900 flex items-center justify-center min-h-screen">
    
    <section class="bg-gray-900 flex min-h-screen ">
        <div id="menu"></div>

        <div class=" bg-gray-900 flex-1 w-full ">

            <div class="bg-gray-900 px-10 py-6">
                <h2 class="text-3xl text-blue-400 font-bold mb-6">Productos</h2>

                <div class="bg-gray-900 grid grid-cols-12 gap-4 flex flex justify-between items-center ">
                    <div class=" col-span-10 ">
                        <input class="p-2  rounded-xl  bg-gray-900 border border-blue-800 text-gray-100 w-full" name="Buscar" placeholder="Buscar">
                    </div>

                    <div class="">
                        <button onclick="openModal('createProductsModal')"
                            class="bg-blue-500 font-bold text-white px-3 py-2 rounded-xl cursor-pointer hover:scale-110 whitespace-nowrap">+
                            Nuevo producto
                        </button>
                    </div>
                </div>


                <table class="bg-gray-900 table w-[97%] mt-10">
                    <thead>
                        <tr class="text-gray-900 bg-gray-400 overflow-hidden rounded-lg">
                            <th class="px-4 py-2 font-semibold">Id</th>
                            <th class="px-4 py-2 font-semibold">Nombre</th>
                            <th class="px-4 py-2 font-semibold">Descripci√≥n</th>
                            <th class="px-4 py-2 font-semibold">Valor unitario</th>
                            <th class="px-4 py-2 font-semibold">Id Proveedor</th>
                            <th class="px-4 py-2 font-semibold">Estado</th>
                            <th class="px-4 py-2 font-semibold">

                            </th> 

                        </tr>
                    </thead>
                    <tbody class="text-gray-200">
                        <tr>
                            <td class="text-center">1</td>
                            <td class="text-center">P01</td>
                            <td class="text-center">Pastas</td>
                            <td class="text-center">Espaguettis doria</td>
                            <td class="text-center">$3.500</td>
                            <td class="text-center"><span
                                    class="inline-flex items-center rounded-full bg-green-50 px-2 py-1 text-xs font-medium text-green-700 ring-1 ring-green-600/20 ring-inset">Disponible</span>
                            </td>
                            <td class="text-center relative overflow-visible">
                                <div class="relative inline-block text-left">
                                    <button onclick="toggleDropdown(this)"
                                        class="inline-flex items-center text-sm font-medium cursor-pointer hover:bg-blue-400 p-1.5 text-gray-500 hover:text-gray-800 rounded-lg focus:outline-none"
                                        type="button">
                                        <svg class="w-5 h-5" aria-hidden="true" fill="currentColor" viewBox="0 0 20 20"
                                            xmlns="http://www.w3.org/2000/svg">
                                            <path
                                                d="M6 10a2 2 0 11-4 0 2 2 0 014 0zM12 10a2 2 0 11-4 0 2 2 0 014 0zM16 12a2 2 0 100-4 2 2 0 000 4z" />
                                        </svg>
                                    </button>
                                    <div
                                        class="dropdown-menu absolute right-0 mt-2 w-48 bg-white rounded-lg shadow-lg z-50 hidden">
                                        <a href="#" onclick="openModal('editProductsModal')"
                                            class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100">Editar</a>
                                        <a href="#" onclick="toggleStatus(this)"
                                            class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-200">Agotado</a>
                                    </div>
                                </div>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>

    </section>

   <div id="modals"></div>

</body>
<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
<script src="https://cdn.jsdelivr.net/npm/@tailwindcss/browser@4"></script>


<script>

     function showAlert(type) {

        if (type === "crear") {
            Swal.fire({
                title: 'Genial!',
                text: 'Ha sido creado exitosamente.',
                icon: 'success',
                confirmButtonText: 'Aceptar',
                background: '#2d2d2d',  
                color: '#ffffff',
                confirmButtonColor: '#60A5FA'
            })
        }
        else {
            Swal.fire({
                title: 'Genial!',
                text: 'Ha sido editado exitosamente.',
                icon: 'success',
                confirmButtonText: 'Aceptar',
                background: '#2d2d2d', 
                color: '#ffffff',
                confirmButtonColor: '#60A5FA'
            })
        }
    }

    function toggleDropdown(button) {
        const menu = button.nextElementSibling;
        const isHidden = menu.classList.contains('hidden');
        document.querySelectorAll('.dropdown-menu').forEach(el => el.classList.add('hidden'));
        if (isHidden) {
            menu.classList.remove('hidden');
            menu.classList.add('flex')
        } else {
            menu.classList.add('hidden');
        }
    }

    document.addEventListener('click', function (event) {
        const isDropdownButton = event.target.closest('button[onclick="toggleDropdown(this)"]');
        if (!isDropdownButton) {
            document.querySelectorAll('.dropdown-menu').forEach(el => el.classList.add('hidden'));
        }
    });

    function openModal(element) {
        document.getElementById(element).classList.remove("hidden");
        document.getElementById(element).classList.add('flex')
    }

    function closeModal(element) {
        document.getElementById(element).classList.add("hidden");
    }
    
    function toggleDropdown(button) {
        const menu = button.nextElementSibling;
        const isHidden = menu.classList.contains('hidden');
        document.querySelectorAll('.dropdown-menu').forEach(el => el.classList.add('hidden'));
        if (isHidden) {
            menu.classList.remove('hidden');
            menu.classList.add('flex')
        } else {
            menu.classList.add('hidden');
        }
    }
    function toggleStatus(button) {
    
        const row = button.closest("tr");
        const statusCell = row.querySelector("td:nth-child(6) span");
        
        if (statusCell.textContent.trim() === "Disponible") {
            statusCell.textContent = "Agotado";
            statusCell.className =
                "inline-flex items-center rounded-full bg-red-50 px-2 py-1 text-xs font-medium text-red-700 ring-1 ring-red-600/20 ring-inset";
            button.textContent = "Disponible";
        } else {
            statusCell.textContent = "Disponible";
            statusCell.className =
                "inline-flex items-center rounded-full bg-green-50 px-2 py-1 text-xs font-medium text-green-700 ring-1 ring-green-600/20 ring-inset";
            button.textContent = "Agotado";
        }
    }


    document.addEventListener("DOMContentLoaded", function() {
    fetch('../partials/menu.html')  
        .then(response => response.text())
        .then(data => {
            document.getElementById('menu').innerHTML = data;
        })
        .catch(err => console.error("Error cargando menu:", err));
    fetch('../partials/modals.html')
        .then(response => response.text())
        .then(data => {
            document.getElementById('modals').innerHTML = data;
        })
        .catch(err => console.error("Error cargando modales:", err));

});
</script>
</html>

   